---
title: "p8105_hw2_jer2243"
author: "Juliet Rowe"
date: "2023-09-27"
output: github_document
---

# Problem 1

## Load tidyverse
```{r}
library(tidyverse)
library(dplyr)
```


## Import and Clean pols-month Data

```{r clean_538_pols}
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )

pols = 
  read_csv("fivethirtyeight_datasets/pols-month.csv") |>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

## Import and clean snp dataset

```{r}
snp = 
  read_csv("fivethirtyeight_datasets/snp.csv") |>
  separate(date, into = c("month", "day", "year"), convert = TRUE) |>
  arrange(year, month) |>
  mutate(month = month.name[month]) |>
  select(year, month, close) 
```


## Import and clean the unemployment dataset

```{r}
unemployment = 
  read_csv("fivethirtyeight_datasets/unemployment.csv") |>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, unemployment)
```


## Joining datasets
```{r merge_538}
data_538 = 
  left_join(pols, snp) |>
  left_join(x = _, y = unemployment)

str(data_538)
```

The `pols` data has `r nrow(pols)` observations and `r ncol(pols)` variables and tells us about the party affiliation distribution (democrat or republican) for governors and senators for a given year from years `r range(pols$year)[1]` to `r range(pols$year)[2]`. It also tells us whether the sitting president was a democrat or republican. The `snp` data has `r nrow(snp)` observations and `r ncol(snp)` variables, ranging from years `r range(snp$year)[1]` to `r range(snp$year)[2]`. The `unemployment` data has `r nrow(unemployment)` observations and `r ncol(unemployment)` variables ranging from years `r range(unemployment$year)[1]` to `r range(unemployment$year)[2]`. In Januarys in or after 1975 in which a democrat was president, the **average unemployment rate was `r filter(data_538, month == "January", year >= 1975, president == "dem") |> pull(unemployment) |> mean() |> round(2)`**.  The average unemployment rate over the same time period in which a republican was president was `r filter(data_538, month == "January", year >= 1975, president == "gop") |> pull(unemployment) |> mean() |> round(2)`.

# Problem 2

## Import and clean Mr. Trash Wheel Data

```{r}
library(readxl)
mr_trashwheel_data = read_excel("~/Desktop/p8105_hw2_jer2243/202207 Trash Wheel Collection Data.xlsx", sheet=1, range="A2:N550")

mr_trashwheel_data_tidy = mr_trashwheel_data |>
  mutate(homes_powered = (`Weight (tons)`*500/30),
         trashwheel = 1,
         Year = as.numeric(Year))
  
```

## Import and clean Professor Trash Wheel Data

```{r}
library(readxl)
prof_trashwheel_data = read_excel("~/Desktop/p8105_hw2_jer2243/202207 Trash Wheel Collection Data.xlsx", sheet=2, range="A2:M97")

prof_trashwheel_data |>
  mutate(homes_powered = (`Weight (tons)`*500/30),
         trashwheel = 2)

```

## Import and clean Gwynnda data

```{r}
library(readxl)
gwynnda_data = read_excel("~/Desktop/p8105_hw2_jer2243/202207 Trash Wheel Collection Data.xlsx", sheet=3, range="A2:K110")

gwynnda_data |>
  mutate(homes_powered = (`Weight (tons)`*500/30),
         trashwheel=3)
```

## Join the 3 trashwheel datasets
```{r}
trashwheel_data =
  bind_rows(mr_trashwheel_data_tidy, prof_trashwheel_data, gwynnda_data) |>
  janitor::clean_names()

glimpse(trashwheel_data)

```

This combined dataset has data from all three trashwheels, including 751 observations and 17 variables. Some key variables include dumpster, month, year, date, weight_tons, and homes_powered.

 
 

# Problem 3

## Import MCI amyloid and baseline data
```{r}
mci_amyloid = read_csv("data_mci/mci_amyloid.csv")

MCI_baseline = read_csv("data_mci/mci_baseline.csv")

```

